<html>
    <meta http-equiv="Content-type" content="text/html; charset=utf-8"/>
    <style>
        body {
            background: #fec;
            font-family: roboto;
        }
        
        .balloon {
            position: fixed;
            top: 10px;
            left: 10px;
            bottom: 10px;
            right: 10px;
            background: white;
            box-shadow: 2px 2px 5px 1px rgba(0, 0, 0, 0.2);
        }
        
        .balloon__wrapper {
            position: absolute;
            border-top: 1px solid rgba(0, 0, 0, 0.2);
            border-bottom: 1px solid rgba(0, 0, 0, 0.2);
            left: 0;
            right: 0;
            bottom: 50px;
            top: 50px;
            overflow: scroll;
            white-space: nowrap;
            vertical-align: top;
            padding: 10px;
        }
        
        
        .period {
            display: inline-block;
            vertical-align: top;
            height: 100%;
            width: 200px;
            border-left: 1px solid gray;
            margin: 0;
        }
        
        .period__date,
        .period__date-input
        {
            color: gray;
            padding: 5px;
            font-size: 10px;
            border: 0;
            margin: 0;
            line-height: 25px;
        }
        
        .period__date-input
        {
            display: none;
        }
        
        .period_editing .period__date-input
        {
            display: block;
        }
        
        .period_editing .period__date
        {
            display: none;
        }
        
        .route {
            padding: 10px;
            padding-left: 5px;
            color: white;
            font-weight: bold;
        }
        
        form {
            display: inline;
        }
        
        [draggable] {
  -moz-user-select: none;
  -khtml-user-select: none;
  -webkit-user-select: none;
  user-select: none;
  /* Required to make elements draggable in old WebKit */
  -khtml-user-drag: element;
  -webkit-user-drag: element;
}

        
    </style>
    <script src="//cdnjs.cloudflare.com/ajax/libs/Sortable/1.4.2/Sortable.min.js"></script>
    <script src="//yastatic.net/jquery/2.2.0/jquery.min.js"></script>
    <script src="js/colors.js"></script>
    <script>
        var data = {
            '1922' : ['<Тм 13'],
            '1932' : ['<Тм 13', '<Тм 23'],
            '1938' : ['Тм 13', 'Тм 23'],
            '1939' : ['Тм 13к', 'Тм 13', 'Тм 23']
            '1942' : ['Тм 13к', 'Тм 23'],
            '1943' : ['Тм 21'],
            '1967' : ['Тм 21', 'Тм 28'],
            '1975' : ['Тм 28'],
            '1991' : ['Тм 30', 'Тм 28'],
            '1995' : ['Тм 30', 'Тм 15', 'Тм 28'],
            '2008' : ['Тм 30', 'Тм 15', 'Тм 23'],
            '19.08.2012' : ['Тм 30', 'Тм 15', 'Тм 28'],
            '19.03.2013' : ['Тм 31', 'Тм 30', 'Тм 15', 'Тм 28'],
            '19.07.2014' : ['Тм 10', 'Тм 30', 'Тм 15'],
            '29.11.2014' : ['Тм 31', 'Тм 30', 'Тм 15', 'Тм 28']
        };
    </script>
    <body onload="">
        <div class="balloon">
            <div class="balloon__title">Segment</div>
            <div class="balloon__wrapper">
                <div class="period">
                    <div class="period__date">
                        19.08.2012
                    </div>
                    <form onsubmit="alert(this); return false;">
                        <input class="period__date-input" value="03.03.2013">
                    </form>
                    <div class="period__content">
                        <div class="route" style="background-color: red" draggable>
                            <div class="route__label">Тм 30</div>
                            <form onsubmit="return false;">
                                <input class="route__input" value="Тм 30">
                            </form>
                        </div>
                        <div class="route" style="background-color: #ed1234" draggable>
                            Тм 15
                        </div>
                        <div class="route" style="background-color: #ff5422" draggable>
                            Тм 28
                        </div>
                    </div>
                </div><div class="period period_editing">
                    <div class="period__date">
                        03.03.2013
                    </div>
                    <form onsubmit="alert(this); return false;">
                        <input class="period__date-input" value="03.03.2013">
                    </form>
                    <div class="period__content">
                        <div class="route" style="background-color: #ff2254">
                            Тм 31
                        </div>
                        <div class="route" style="background-color: red">
                            Тм 30
                        </div>
                        <div class="route" style="background-color: #ed1234">
                            Тм 15
                        </div>
                        <div class="route" style="background-color: #ff5422">
                            Тм 28
                        </div>
                    </div>
                </div>

            </div>
        </div>
        <script>
                
        $('.period__content').each(function(period) {
            Sortable.create(period);
        });
        </script>
    </body>
</html>